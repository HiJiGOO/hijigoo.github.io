<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Blog &middot; 안녕지구
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/main.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico?v=2">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">


  <!-- Web Font -->
  <!-- <link href="https://fonts.googleapis.com/css?family=Nanum+Gothic" rel="stylesheet"> -->
  <link href="https://fonts.googleapis.com/css?family=Nanum+Gothic|Nanum+Gothic+Coding|Noto+Sans+KR" rel="stylesheet">

  <!-- Highlighter -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/atom-one-dark.min.css" />
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
    hljs.configure({tabReplace: '    '})
  </script>

  <!-- Custom -->
  <link rel="stylesheet" href="/public/css/custom.css">

  <!-- MathJax -->
  

</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <div class="sidebar-personal-info">
      <!-- 
      <div class="sidebar-personal-info-section">
        <a href="http://gravatar.com/">
          <img src="http://www.gravatar.com/avatar/?s=350" title="View on Gravatar" alt="View on Gravatar" />
        </a>
      </div>
      -->
      <div class="sidebar-personal-info-section">
        <p>안녕하세요. 기록하는 개발자입니다.</p>
      </div>
      
      
      
      <div class="sidebar-personal-info-section">
        <p> Follow me: 
        
        
        
        <a href="https://github.com/HiJiGOO">
          <i class="fa fa-github" aria-hidden="true"></i>
        </a>
        
        |
        
        
        
        <a href="mailto:hi.jigoo@gmail.com">
          <i class="fa fa-envelope" aria-hidden="true"></i>
        </a>
        
        
        
        </p>
      </div>
      
    </div>
  </div>

  <nav class="sidebar-nav">
    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/">
          Home
        </a>

        
      </span>

    
      
      
      

      

      <span class="foldable">
        <a class="sidebar-nav-item " href="/blog/categories/">
          Categories
        </a>

        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/categories/#algorithm">
                <!-- Algorithm -->
                
                Algorithm&nbsp
                (
                  
                  
                  11
                )
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/categories/#bixby">
                <!-- Bixby -->
                
                Bixby&nbsp
                (
                  
                  
                  7
                )
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/categories/#NLP">
                <!-- NLP -->
                
                NLP&nbsp
                (
                  
                  
                  0
                )
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/categories/#reinforcement-learning">
                <!-- Reinforcement Learning -->
                
                Reinforcement Learning&nbsp
                (
                  
                  
                  4
                )
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/categories/#daily">
                <!-- Daily -->
                
                Daily&nbsp
                (
                  
                  
                  0
                )
              </a>
          
        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/blog/tags/">
          Tags
        </a>

        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/about/">
          About
        </a>

        
      </span>

    

    <!-- <span class="sidebar-nav-item">Currently v1.0.0</span> -->
  </nav>

  <div class="sidebar-item">
    <p>
    &copy; 2019 안녕지구. This work is liscensed under <a href="http://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a>.
    </p>
  </div>


  <div class="sidebar-item">
    <p>
    Powered by <a href="http://jekyllrb.com">jekyll</a>
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home" title="안녕지구">
              <!-- <img class="masthead-logo" src="/public/logo.png"/> -->
              안녕지구
            </a>
            <small>#developer #bompapa</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/bixby/2018/12/28/basic_tutorial_4/">
        주사위 프로젝트 - View 및 Dialog 작성
      </a>
    </h1>

    <span class="post-date">28 Dec 2018</span>
     | 
    
    <a href="/blog/tags/#인공지능" class="post-tag">인공지능</a>
    
    <a href="/blog/tags/#빅스비" class="post-tag">빅스비</a>
    
    

    <article>
      <h2 id="view-작성">View 작성</h2>

<p>안녕하세요! 이전 포스트에서는 View를 작성하지 않아 테이블 형태로 결과를 보여주었는데요, 이번 포스트에서는 View를 작성해서 사용자에게 결과 화면을 더 이쁘게(?!) 보여주겠습니다. 자 그럼 아래와 같이 파일을 생성하고 코드를 작성합니다.</p>

<hr />

<p><em>/resources/ko/RollResult.view.bxb</em></p>
<pre><code>result-view {
 match {
   RollResult (rollResult)
 }

 render {
   layout {
     section {
       content {
         single-line {
           text {
             style (Detail_M)
             value ("Sum: #{value(rollResult.sum)}")
           }
         }
         single-line {
           text {
             style (Detail_M)
             value ("Rolls: #{value(rollResult.roll)}")
           }
         }
       }
     }
   }
 }
}
</code></pre>

<hr />

<div class="message">
'ko' 폴더는 단말에서 빅스비 언어를 한국어로 설정했을 때 반영됩니다. 현재는 전체 코드를 나눠놨지만 전체 구조는 공유하고 단어나 문장이 출력되는 부분만 template으로 따로 빼서 Localization을 할 수 있습니다.
</div>

<p>위 코드에서 <strong>match</strong> 부분은 action의 output과 연결됩니다. 코드를 풀이해보면 어떤 action의 output이 RollResult라면 현재 view에서 보여주겠다는 뜻입니다. 자세한 <a href="https://bixbydevelopers.com/dev/docs/dev-guide/developers/customizing-plan.match-patterns"><strong>match patterns</strong></a> 는 공식 홈페이지에서 확인하실 수 있습니다.</p>

<p>그리고 아래 <strong>render</strong>에 화면에 표시해주는 코드를 작성합니다. 화면에 따라서 용도에 맞는 component를 사용해서 작성하실 수 있습니다. 지금은 깊게 다루지 않기 때문에 전체 흐름만 파악하시면 될 것 같습니다. 자세한 내용은 공식 홈페이지의 <a href="https://bixbydevelopers.com/dev/docs/dev-guide/developers/building-views"><strong>Building Views</strong></a> 를 참고 부탁드립니다.</p>

<p>코드 중간에 보면 <strong>#{value(rollResult.sum)}</strong>와 같이 <strong>#{}</strong>로 작성된 부분을 볼 수 있는데요. 이 부분은 빅스비의 <a href="https://bixbydevelopers.com/dev/docs/dev-guide/developers/customizing-plan.using-el"><strong>Expression Language</strong></a>로 다양한 연산자를 View의 String 내부에서 사용할 수 있게 도와줍니다.</p>

<p>이제 아래와 같이 intent를 보내서 화면에 어떻게 나오는지 확인할 수 있습니다.</p>

<pre><code>intent {
  goal: RollResult
  value: NumSides (6)
  value: NumDice (2)
}
</code></pre>

<p>다음은 결과 화면입니다.
<img src="/assets/2018-12-28-basic_tutorial_4/result.png" alt="image" width="50%" height="50%" /></p>

<p>현재는 기본 Dialog로 <strong><em>“검색 완료! 확인해보세요.”</em></strong> 라고 나옵니다.</p>

<h2 id="dialog-작성">Dialog 작성</h2>

<p>이제 기본 Dialog를 변경해서 원하는 문장을 출력해봅시다. 결과물을 보여주는 화면을 만들기 전에 아래와 같이 Dialog 파일을 생성하고 코드를 작성합니다.</p>

<hr />

<p><em>/resources/ko/NumSides.dialog.bxb</em></p>
<pre><code>dialog (Concept) {
 match {
   // Look for this type
   NumSides
 }
 // Use the following template text with this type
 template("면의 수")
}
</code></pre>

<p><em>/resources/ko/NumDice.dialog.bxb</em></p>
<pre><code>dialog (Concept) {
 match {
   // Look for this type
   NumDice
 }
 // Use this template text with this type
 template("주사위 수")
}
</code></pre>

<hr />

<p>참고로, 위의 두 dialog 모드(mode) concept입니다. 이 모드는 <a href="https://bixbydevelopers.com/dev/docs/reference/ref-topics/dialog-modes.dialog-fragments#concept-fragment">Dialog Fragment</a>중 하나로, 필요한 concept을 intent에 넣지 않고 보냈을 경우 아래와 같이 응답을 생성하는데 사용됩니다.</p>

<blockquote>
  <p>계속하려면 <strong>주사위 수</strong>가 필요해요</p>
</blockquote>

<p>다음과 같이 NumDice를 제외한채 intent를 보내다보면 확인하실 수 있습니다.</p>

<pre><code>intent {
  goal: RollResult
  value: NumSides (6)
}
</code></pre>

<p>자, 이제 최종 결과물을 보여주는 Dialog를 작성합시다. 아래와 같이 파일을 만들면 됩니다.</p>

<hr />

<p><em>/resources/ko/RollResult.dialog.bxb</em></p>
<pre><code>dialog (Result) {
 // bind the variable "rollResult" to the result and "rollOutput" to
 // the action of which it was output
 match {
   RollResult (rollResult) {
     from-output: RollDice (rollOutput)
   }
 }
 // define a condition that changes the dialog depending on whether there
 // is one or more dice
 if (rollOutput.numDice == 1) {
   template ("주사위의 번호는 ${value(rollResult.roll)}입니다!")    
 }
 if (rollOutput.numDice &gt; 1) {
   choose (Random) {
     template ("주사위의 총 합은 ${value(rollResult.sum)}입니다.")
     template ("각 주사위의 번호는 ${list(rollResult.roll, 'value')}입니다.")    
   }
 }
}
</code></pre>

<hr />

<p>전체적으로 View코드와 유사한데요, 조금 다른 점이 있습니다. 바로 <strong><em>from-output</em></strong> 인데요. RollDice의 output인 RollResult와 매칭을 시키겠다는 뜻입니다. 사실 이 프로젝트에서는 action이 유일하기 때문에 view와 매칭은 되는데요, 아래 보면 RollDice의 변수로 지정한 <strong>rollOutput</strong>을 이용하는 코드가 존재하기 때문에 유지해야합니다. rollOutput을 을 이용해서 RollDice의 input 값에 접근할 수 있습니다. <strong>choose(Random)</strong> 는 template 중 한가지를 임의 선택합니다.</p>

<div class="message">
같은 질문에 매번 같은 대답만 한다면 인공지능처럼 느껴지지 않을 것입니다. 또한 사용자 입장에서 재미도 없을 겁니다. 그래서 다양한 응답 varidation을 주기 위해서 choose(Random)은 자주 사용하는 키워드입니다.
</div>

<p>이제 다시 아래 intent를 보내면 최종 결과물을 확인할 수 있습니다.</p>

<pre><code>intent {
  goal: RollResult
  value: NumSides (6)
  value: NumDice (2)
}
</code></pre>

<p>다음은 View와 Dialog가 적용된 화면입니다.
<img src="/assets/2018-12-28-basic_tutorial_4/result2.png" alt="image" width="50%" height="50%" /></p>

<p>여기까지 진행 하셨으면 Capsule의 기본적인 부분은 완성되었습니다. 다음 포스트에서는 Default Value 넣는 방법에 대해 다루겠습니다. 감사합니다.</p>

    <article>
    <div class="post-more">
      
      <a href="/bixby/2018/12/28/basic_tutorial_4/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/bixby/2018/12/28/basic_tutorial_4/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/algorithm/2018/12/27/boj-corporative-network-3780/">
        BOJ - 네트워크 연결(3789)
      </a>
    </h1>

    <span class="post-date">27 Dec 2018</span>
     | 
    
    <a href="/blog/tags/#boj" class="post-tag">BOJ</a>
    
    <a href="/blog/tags/#백준" class="post-tag">백준</a>
    
    <a href="/blog/tags/#알고리즘" class="post-tag">알고리즘</a>
    
    <a href="/blog/tags/#자료구조" class="post-tag">자료구조</a>
    
    

    <article>
      <p><strong>Disjoint Set</strong> 문제이며 <strong>유니온 파인드(Union-Find)</strong>를 사용해서 해결할 수 있는 문제입니다. 중요한 부분은 find를 할 때 기존 경로 압축(path compression)을 하면서 거리도 업데이트 해줘야 합니다. merge 할 때는 최상위 노드를 따로 찾을 필요 없이 입력으로 들어온 두 노드를 바로 연결 해주면 됩니다.</p>

<div class="message">
경로 압축(path compression)을 하지 않고, 매번 재귀로 거리를 계산하면 Timeout이 발생합니다.
</div>

<h2 id="라인-길이">라인 길이</h2>
<pre><code>// define
#define MAX 200010

// distance to center
int dist[MAX];

// get distance
int distance(int a, int b) {
	int dist = a &gt; b ? a - b : b - a;
	return dist % 1000;
}
</code></pre>

<h2 id="유니온-파인드">유니온 파인드</h2>
<pre><code>int parent[MAX];

int find(int n) {
	if (parent[n] == 0) return n;
	int p = find(parent[n]);

	//// 길이 업데이트 ////
	dist[n] += dist[parent[n]];
	
	parent[n] = p;
	return p;
	
}

void merge(int a, int b) {
	dist[a] = distance(a, b);
	parent[a] = b;
}
</code></pre>

<h2 id="메인-함수">메인 함수</h2>
<pre><code>#include &lt;stdio.h&gt;
int main() {

	int T;
	scanf("%d", &amp;T);

	while(T--) {
		// initialize
		for (int i = 0; i &lt; MAX; i++) {
			dist[i] = 0;
			parent[i] = 0;
		}

		int N;
		scanf("%d", &amp;N);
		while(true) {

			char command;
			scanf(" %c", &amp;command);
			if (command == 'O') {
				break;
			}

			if (command == 'E') {
				int i;
				scanf("%d", &amp;i);
				find(i);
				printf("%d\n", dist[i]);
			} else {
				int i, j;
				scanf("%d %d", &amp;i, &amp;j);
				merge(i, j);
			};
		}
	}
	return 0;
}
</code></pre>

    <article>
    <div class="post-more">
      
      <a href="/algorithm/2018/12/27/boj-corporative-network-3780/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/algorithm/2018/12/27/boj-corporative-network-3780/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/bixby/2018/12/23/basic_tutorial_3/">
        주사위 프로젝트 - Capsule 테스트
      </a>
    </h1>

    <span class="post-date">23 Dec 2018</span>
     | 
    
    <a href="/blog/tags/#인공지능" class="post-tag">인공지능</a>
    
    <a href="/blog/tags/#빅스비" class="post-tag">빅스비</a>
    
    

    <article>
      <h2 id="capsule-테스트">Capsule 테스트</h2>

<p>이제 아래와 같은 순서로 실행해볼 수 있습니다.</p>

<ol>
  <li><strong>View &gt; Open Simulator</strong> 로 가서 Simulator를 실행합니다.</li>
  <li>팝업창이 뜨면 <strong>Confirm</strong>을 눌러서 컴파일 하고 학습된 데이터를 준비합니다.</li>
  <li>아직 자연어 학습을 하지 않았기 때문에 아래의 intent를 직접 입력합니다.
    <pre><code>intent {
  goal: RollResult
  value: NumSides (6)
  value: NumDice (2)
}
</code></pre>
  </li>
  <li><strong>Run NL</strong> 을 선택하여 실행합니다.</li>
</ol>

<p>간단하게 설명드리면, 사용자는 RollResult를 얻기를 원하며, NumSides값을 6으로, NumDice값을 2로 빅스비에게 알려준 것입니다.</p>

<div class="message">
자연어를 학습시키면 "면이 6개인 주사위 2개를 굴려줘!" 라는 발화가 위의 intent로 변환되어 실행됩니다. 이 부분은 맨 마지막에 다룰 예정입니다.
</div>

<p>지금까지 잘 따라오셨다면 아래와 같은 화면을 보실 수 있을 겁니다. 현재는 따로 화면(Moment)을 만들지 않았기 때문에 리턴된 output 데이터를 테이블형식으로 보여줍니다.</p>

<div class="message">
빅스비에서는 사용자에게 보여주는 응답, 즉 화면 자체를 Moment라고 지칭합니다.
</div>

<p><img src="/assets/2018-12-23-basic_tutorial_3/screenshot02.png" alt="image" /></p>

<p>이제 빅스비가 실행 그래프(execution graph)가 어떻게 만들었는지 확인해봅시다. simulator에서 왼쪽 위에 Reset 버튼 옆에 있는 두개의 버튼 중 <strong>Debug</strong> 버튼을 눌러서 Debug Console을 실행하면 아래와 같은 화면을 보실 수 있을겁니다.</p>

<!-- ![image](){: width="50%" height="50%"} -->
<p><img src="/assets/2018-12-23-basic_tutorial_3/screenshot03.png" alt="image" /></p>

<p>위의 그래프를 보면 intent에서 두 개의 value 값이 concept으로 맵핑되고 goal인 RollResult를 얻기 위해서 RollDice로 연결되었습니다. 그리고 그래프가 실행되면서 RollDice Action에 도달했을 때는 endpoint에서 연결 된 RollDice.js 를 실행시켜 최종 아웃풋인 RollResult를 결과로 얻습니다.</p>

<p>다음 포스트에서는 RollResult를 화면에 보여주는 방법에 대해서 정리하겠습니다.</p>

    <article>
    <div class="post-more">
      
      <a href="/bixby/2018/12/23/basic_tutorial_3/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/bixby/2018/12/23/basic_tutorial_3/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/algorithm/2018/12/23/boj-friend-network-4195/">
        BOJ - 친구 네트워크(4195)
      </a>
    </h1>

    <span class="post-date">23 Dec 2018</span>
     | 
    
    <a href="/blog/tags/#boj" class="post-tag">BOJ</a>
    
    <a href="/blog/tags/#백준" class="post-tag">백준</a>
    
    <a href="/blog/tags/#알고리즘" class="post-tag">알고리즘</a>
    
    <a href="/blog/tags/#자료구조" class="post-tag">자료구조</a>
    
    

    <article>
      <p><strong>유니온 파인드(Union-Find)</strong>를 사용해서 해결할 수 있는 문제입니다. 그런데 find 과정에서 단순하게 문자열 비교를 하면 Timeout이 발생합니다. 이를 해결하기 위해서 문자열을 <strong>hash code</strong>로 변환해서 비교해야 합니다. <strong>HashMap</strong>을 만들 때 hash code가 겹칠 수 있기 때문에 <strong>Linked List</strong>를 사용했습니다. 이런 방식을 <a href="https://en.wikipedia.org/wiki/Hash_table#Separate_chaining"><strong>Separate chaining</strong></a>이라고 합니다. 기존의 HashMap 라이브러리를 사용하셔도 됩니다.</p>

<p>hash code 구하는 식은 <a href="https://d2.naver.com/helloworld/831311">Naver D2</a>를 참고했습니다.</p>

<div class="message">
문자열을 배열로 받으면 주소가 고정되어서, Node에 저장된 name이 다음 입력을 받을 때 변경되는 문제가 있었습니다. 이 문제를 해결하고자 문자열을 동적 할당해서 매번 다른 주소값에 맵핑 되도록 수정했습니다. 문자열을 카피해서 해결하는 방법도 있습니다.
</div>

<h2 id="노드">노드</h2>
<pre><code>// define
#define MAX 200010

// node
struct Node {
	Node* next;
	int idx;
	char* name;
}nodearr[MAX];

int nodeidx = 0;
Node* allocnode(char* name, int idx) {
	Node* node = &amp;nodearr[nodeidx++];
	node-&gt;name = name;
	node-&gt;idx = idx;
	return node;
}
</code></pre>

<h2 id="hash-code">Hash Code</h2>
<pre><code class="language-cpp">int hashCode(char* str) {
	int hash = 0;
	for (int i = 0; str[i] != '\0'; i++) {
		hash = (hash * 31 + str[i]) % MAX;
	}
	return hash;
}
</code></pre>

<h2 id="hash-map">Hash Map</h2>
<pre><code>Node* h[MAX];

int get(char* name) {
	int hash = hashCode(name);

	Node* cur = h[hash];
	while (cur != '\0') {
		int isSame = 1;
		for (int i = 0; i &lt; 21; i++) {
			if (name[i] != cur-&gt;name[i]) {
				isSame = 0;
				break;
			}
		}
		if (isSame) return cur-&gt;idx;
		cur = cur-&gt;next;
	}
}

void put(char* name, int idx) {
	int hash = hashCode(name);
	Node* node = allocnode(name, idx);
	if (h[hash] == '\0') h[hash] = node;
	else {
		node-&gt;next = h[hash];
		h[hash] = node;
	}
}

int isContain(char* name) {
	int hash = hashCode(name);
	if (h[hash] == '\0') return 0;
	else {
		Node* cur = h[hash];
		while (cur != '\0') {
			int isSame = 1;
			for (int i = 0; i &lt; 21; i++) {
				if (name[i] != cur-&gt;name[i]) {
					isSame = 0;
					break;
				}
			}
			if (isSame) return 1;
			cur = cur-&gt;next;
		}
		return 0;
	}
}
</code></pre>

<h2 id="유니온-파인드">유니온 파인드</h2>
<pre><code>int find(int n) {
	if (p[n] &lt; 0) return n;
	else {
		// path compression
		p[n] = find(p[n]);
		return p[n];
	}
}

int uni(int a, int b) {

	int ap = find(a);
	int bp = find(b);

	if (ap != bp) {
		p[bp] = ap;
		c[ap] += c[bp];
	}

	return c[ap];
}
</code></pre>

<h2 id="메인-함수">메인 함수</h2>
<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
int main() {

	int T;
	scanf("%d", &amp;T);

	while (T--) {
		int nameCount = 1;
		for (int i = 0; i &lt; MAX; i++) {
			p[i] = -1;
			c[i] = 1;
		}

		int F;
		scanf("%d", &amp;F);

		while (F--) {

			char* a = (char*)malloc(sizeof(char) * 21);
			char* b = (char*)malloc(sizeof(char) * 21);

			scanf("%s", a);
			scanf("%s", b);

			if (isContain(a) == 0) {
				put(a, nameCount++);
			}
			if (isContain(b) == 0) {
				put(b, nameCount++);
			}

			int count = uni(get(a), get(b));
			printf("%d\n", count);
		}

	}

	return 0;
}
</code></pre>

    <article>
    <div class="post-more">
      
      <a href="/algorithm/2018/12/23/boj-friend-network-4195/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/algorithm/2018/12/23/boj-friend-network-4195/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/bixby/2018/12/22/basic_tutorial_2/">
        주사위 프로젝트 - Concept과 Action 작성
      </a>
    </h1>

    <span class="post-date">22 Dec 2018</span>
     | 
    
    <a href="/blog/tags/#인공지능" class="post-tag">인공지능</a>
    
    <a href="/blog/tags/#빅스비" class="post-tag">빅스비</a>
    
    

    <article>
      <h2 id="concepts과-actions-작성">Concepts과 Actions 작성</h2>

<p>이번 포스트에서는 Concept과 Action을 만들어서 모델링하는 과정을 설명드리겠습니다. Concept는 우리가 사용 할 변수라고 보시면 되고, Action은 함수라고 생각하면 조금 더 이해하기 편하실 겁니다.</p>

<blockquote>
  <p>Concepts explain what Bixby knows, while actions determine what Bixby can do.</p>
</blockquote>

<p>프로젝트에서는 총 다섯개의 Concept과  한개의 Action을 사용합니다. 각 의미는 아래와 같습니다.</p>

<ul>
  <li><strong>Concept</strong>
    <ul>
      <li><strong>NumDice.model.bxb</strong> : 주사위의 개수를 의미하는 primitive concept 입니다.</li>
      <li><strong>NumSides.model.bxb</strong> : 주사위 면의 개수를 의미하는 primitive concept 입니다.</li>
      <li><strong>Roll.model.bxb</strong> : 주사위 하나에서 나온 숫자를 의미하는 primitive concept 입니다.</li>
      <li><strong>Sum.model.bxb</strong> : 모든 주사위에서 나온 숫자의 합을 의미하는 primitive concept 입니다.</li>
      <li><strong>RollResult.model.bxb</strong> : 최종 결과이며 Roll과 Sum을 포함하는 structure concept 입니다.</li>
    </ul>
  </li>
  <li><strong>Action</strong>
    <ul>
      <li><strong>RollDice.model.bxb</strong> : NumDice와 NumSides를 입력으로 받아서 RollResult를 생성하는 action입니다.</li>
    </ul>
  </li>
</ul>

<p>위에서 primitive는 integer나 text 같은 기본 자료형을 의미합니다. 이제 models 폴더 아래에 concepts 폴더를 생성하고 위에 있는 Concept 파일들을 만들어줍니다. RollResult를 제외한 모든 Concept의 데이터 타입은 모두 integer 입니다. 위에서도 설명드렸듯이 RollResult는 Roll과 Sum을 포함하고 있는 strucutre 타입입니다. 아래는 각 파일 경로와 코드입니다.</p>

<hr />

<p><em>/model/concepts/Numdice.model.bxb</em></p>
<pre><code>integer (NumDice) {
  description (The number of dice.)
}
</code></pre>

<p><em>/model/concepts/NumSides.model.bxb</em></p>
<pre><code>integer (NumSides) {
  description (The number of sides to the dice.)
}
</code></pre>

<p><em>/model/concepts/Roll.model.bxb</em></p>
<pre><code>integer (Roll) {
  description (The result of a dice roll.)
}
</code></pre>

<p><em>/model/concepts/Sum.model.bxb</em></p>
<pre><code>integer (Sum) {
  description (The total sum of all the dice rolled.)
}
</code></pre>

<p><em>/model/concepts/RollResult.model.bxb</em></p>
<pre><code>structure (RollResult) {
  description (The result object produced by the RollDice action.)
  property (sum) {
    type (Sum)
    min (Required)
    max (One)
  }
  property (roll) {
    type (Roll)
    min (Required)
    max (Many)
  }      
}
</code></pre>

<hr />

<p>위의 RollResult에서 roll은 주사위의 개수만큼 있기 때문에 리스트로 받아야 합니다. <strong>max값이 Many이면 값을 리스트로 받습니다.</strong> Concept을 정의했으니 이제 Action을 만들어보겠습니다. Action은 models 폴더 아래에 actions 폴더를 생성하고 RollDice.model.bxb 파일을 만듭니다.</p>

<hr />

<p><em>/model/actions/RollDice.model.bxb</em></p>
<pre><code>action (RollDice) {
  type (Calculation)

  collect{
    input (numDice) {
      type (NumDice)
      min (Required)
      max (One)
    }

    input (numSides) {
      type (NumSides)
      min (Required)
      max (One)
    }
  } 

  output (RollResult)
}
</code></pre>

<hr />

<p>위의 코드를 보시면 입력(collect)으로는 numDice와 numSides를 각각 하나씩 받고 아웃풋으로는 RollResult가 생성되도록 정의했습니다. type은 선택사항으로 <a href="https://bixbydevelopers.com/dev/docs/reference/type/action.type">링크</a>를 참고하여 넣어주시면 됩니다. 여기까지 기본적인 모델링을 했다고 생각하시면 됩니다. Bixby는 우리가 모델링한 Action과 Concept를 참고해서 실행 될 그래프를 만들어 줄 겁니다.</p>

<p>이제 RollDice의 함수를 만들어야 합니다. 앞서 만든 RollDice의 Action이 interface라면, 이제 만들 함수는 implementation이라고 생각하시면 됩니다. 코드는 다음과 같습니다. code 폴더 아래에 RollDice.js 함수를 생성합니다.</p>

<hr />

<p><em>/model/code/RollDice.js</em></p>
<pre><code>// Main entry point
module.exports.function = function rollDice(numDice, numSides) {

  var sum = 0;
  var result = [];

  // Generate random roll number (1~numSides)
  for (var i = 0; i &lt; numDice; i++) {
    var roll = Math.ceil(Math.random() * numSides);
    result.push(roll);
    sum += roll;
  }

  // RollResult
  return {
    sum: sum, // required Sum
    roll: result // required list Roll
  }
}
</code></pre>

<hr />

<p>위의 함수를 보시면 RollDice.model.bxb 에 정의한 내용과 같게 numDice와 numSides를 입력으로 받고 RollResult를 리턴합니다. 마찬가지로 반환되는 JSON도 RollResult.model.bxb 와 같은 구조입니다.</p>

<p>이제 Bixby가 실행될 때 Javascript 함수에도 접근할 수 있도록 endpoint를 정의 해주어야 합니다. resources 폴더 아래에 다시 ko 폴더를 만들고 endpoints.bxb 파일을 추가합니다.</p>

<hr />

<p><em>/resources/ko/endpoints.bxb</em></p>
<pre><code>endpoints {
   authorization {
     none
   }
   action-endpoints {
     action-endpoint (RollDice) {
       accepted-inputs (numDice, numSides)
       local-endpoint ("RollDice.js")
     }
   }
}
</code></pre>

<hr />

<p>여기까지 진행하셨으면, Capsule에 intent를 날리고 실행 그래프가 어떻게 만들어지는지 확인할 수 있습니다. 이 내용은 다음 포스트에서 다루도록 하겠습니다. 감사합니다.</p>

    <article>
    <div class="post-more">
      
      <a href="/bixby/2018/12/22/basic_tutorial_2/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/bixby/2018/12/22/basic_tutorial_2/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/blog/page3">Older</a>
  
  
    
      <a class="pagination-item newer" href="/blog/">Newer</a>
    
  
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if (target === toggle) {
            checkbox.checked = !checkbox.checked;
            e.preventDefault();
          } else if (checkbox.checked && !sidebar.contains(target)) {
            /* click outside the sidebar when sidebar is open */
            checkbox.checked = false;
          }
        }, false);
      })(document);
    </script>
    
    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-130716162-1', 'auto');
ga('send', 'pageview');
    </script>
    
  </body>
  
  <script id="dsq-count-scr" src="//hijigoo.disqus.com/count.js" async></script>
  
</html>
